---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  keywords?: string;
  image?: string;
}

const {
  title,
  description = 'Master DevOps & Cloud Engineering with specialized career roadmaps. From Intern to Cloud Architect - AWS, Azure, GCP, Kubernetes, Terraform, SRE, and more.',
  keywords = 'DevOps career roadmap, cloud engineer path, DevOps transition guide, AWS roadmap, Azure roadmap, Kubernetes learning path, Terraform guide, SRE career, platform engineering, DevOps fundamentals',
  image = '/og-image.png'
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const fullTitle = title === 'Home' ? 'DevOpulse - DevOps & Cloud Career Roadmaps' : `${title} | DevOpulse`;
const ogImage = new URL(image, Astro.site);
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />

    <!-- Primary Meta Tags -->
    <title>{fullTitle}</title>
    <meta name="title" content={fullTitle} />
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={fullTitle} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={ogImage} />

    <!-- Preconnect to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  </head>
  <body>
    <!-- Header Navigation -->
    <header class="header">
      <nav class="container">
        <div class="nav-wrapper">
          <a href="/" class="logo">
            <span class="logo-text gradient-text">DevOpulse</span>
          </a>

          <ul class="nav-links">
            <li><a href="/" class="nav-link">Home</a></li>
            <li><a href="/roadmaps/" class="nav-link">Roadmaps</a></li>
            <li><a href="/about/" class="nav-link">About</a></li>
          </ul>

          <a href="/roadmaps/" class="btn btn-primary btn-small cta-nav">
            Get Started
          </a>

          <!-- Mobile menu button -->
          <button class="mobile-menu-btn" aria-label="Toggle menu" id="mobileMenuBtn">
            <span class="hamburger"></span>
          </button>
        </div>

        <!-- Mobile menu -->
        <div class="mobile-menu" id="mobileMenu">
          <a href="/" class="mobile-link">Home</a>
          <a href="/roadmaps/" class="mobile-link">Roadmaps</a>
          <a href="/about/" class="mobile-link">About</a>
          <a href="/roadmaps/" class="btn btn-primary" style="margin-top: 1rem;">
            Get Started
          </a>
        </div>
      </nav>
    </header>

    <!-- Main Content -->
    <main>
      <slot />
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-grid">
          <div class="footer-section">
            <h3 class="gradient-text mb-4">DevOpulse</h3>
            <p class="footer-description">
              Empowering the next generation of IT professionals with clear roadmaps and expert guidance.
            </p>
          </div>

          <div class="footer-section">
            <h4 class="footer-heading">Career Paths</h4>
            <ul class="footer-links">
              <li><a href="/roadmaps/devops-engineer/">DevOps Engineer</a></li>
              <li><a href="/roadmaps/cloud-engineer/">Cloud Engineer</a></li>
              <li><a href="/roadmaps/frontend-developer/">Frontend Developer</a></li>
              <li><a href="/roadmaps/backend-developer/">Backend Developer</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h4 class="footer-heading">Quick Links</h4>
            <ul class="footer-links">
              <li><a href="/roadmaps/">All Roadmaps</a></li>
              <li><a href="/about/">About Us</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h4 class="footer-heading">Legal</h4>
            <ul class="footer-links">
              <li><a href="/about/#disclosure">Affiliate Disclosure</a></li>
            </ul>
          </div>
        </div>

        <div class="footer-bottom">
          <p class="footer-copy">
            Â© {new Date().getFullYear()} DevOpulse. All rights reserved.
          </p>
          <p class="footer-disclosure">
            DevOpulse is a participant in various affiliate programs. We may earn a commission from qualifying purchases made through our links.
          </p>
        </div>
      </div>
    </footer>

    <style>
      /* Header Styles */
      .header {
        position: sticky;
        top: 0;
        z-index: var(--z-sticky);
        background: var(--glass-bg);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border-bottom: 1px solid var(--glass-border);
      }

      .nav-wrapper {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--spacing-4) 0;
      }

      .logo {
        text-decoration: none;
      }

      .logo-text {
        font-size: var(--text-2xl);
        font-weight: 900;
        letter-spacing: -0.02em;
      }

      .nav-links {
        display: flex;
        gap: var(--spacing-8);
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .nav-link {
        font-size: var(--text-base);
        font-weight: 500;
        color: var(--color-text-muted);
        text-decoration: none;
        transition: color var(--transition-fast);
        position: relative;
      }

      .nav-link::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 0;
        width: 0;
        height: 2px;
        background: var(--gradient-card);
        transition: width var(--transition-base);
      }

      .nav-link:hover {
        color: var(--color-text);
      }

      .nav-link:hover::after {
        width: 100%;
      }

      .cta-nav {
        margin-left: var(--spacing-4);
      }

      /* Mobile Menu */
      .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: var(--spacing-2);
      }

      .hamburger {
        display: block;
        width: 24px;
        height: 2px;
        background: var(--color-text);
        position: relative;
        transition: background var(--transition-base);
      }

      .hamburger::before,
      .hamburger::after {
        content: '';
        position: absolute;
        width: 24px;
        height: 2px;
        background: var(--color-text);
        transition: transform var(--transition-base);
      }

      .hamburger::before {
        top: -8px;
      }

      .hamburger::after {
        bottom: -8px;
      }

      .mobile-menu {
        display: none;
        flex-direction: column;
        gap: var(--spacing-4);
        padding: var(--spacing-6) 0;
        border-top: 1px solid var(--glass-border);
      }

      .mobile-menu.active {
        display: flex;
      }

      .mobile-link {
        font-size: var(--text-lg);
        font-weight: 500;
        color: var(--color-text-muted);
        text-decoration: none;
        transition: color var(--transition-fast);
      }

      .mobile-link:hover {
        color: var(--color-text);
      }

      /* Footer Styles */
      .footer {
        background: var(--color-bg-secondary);
        border-top: 1px solid var(--color-bg-tertiary);
        padding: var(--spacing-16) 0 var(--spacing-8);
        margin-top: var(--spacing-20);
      }

      .footer-grid {
        display: grid;
        grid-template-columns: 2fr repeat(3, 1fr);
        gap: var(--spacing-8);
        margin-bottom: var(--spacing-12);
      }

      .footer-section h3,
      .footer-section h4 {
        margin-bottom: var(--spacing-4);
      }

      .footer-heading {
        font-size: var(--text-base);
        font-weight: 600;
        color: var(--color-text);
        margin-bottom: var(--spacing-4);
      }

      .footer-description {
        font-size: var(--text-sm);
        color: var(--color-text-muted);
        line-height: 1.6;
      }

      .footer-links {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .footer-links li {
        margin-bottom: var(--spacing-2);
      }

      .footer-links a {
        font-size: var(--text-sm);
        color: var(--color-text-muted);
        text-decoration: none;
        transition: color var(--transition-fast);
      }

      .footer-links a:hover {
        color: var(--color-primary-500);
      }

      .footer-bottom {
        padding-top: var(--spacing-8);
        border-top: 1px solid var(--color-bg-tertiary);
        text-align: center;
      }

      .footer-copy {
        font-size: var(--text-sm);
        color: var(--color-text-subtle);
        margin-bottom: var(--spacing-2);
      }

      .footer-disclosure {
        font-size: var(--text-xs);
        color: var(--color-text-dark);
        max-width: 600px;
        margin: 0 auto;
      }

      /* Responsive Styles */
      @media (max-width: 1024px) {
        .footer-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .footer-section:first-child {
          grid-column: span 2;
        }
      }

      @media (max-width: 768px) {
        .nav-links,
        .cta-nav {
          display: none;
        }

        .mobile-menu-btn {
          display: block;
        }

        .footer-grid {
          grid-template-columns: 1fr;
        }

        .footer-section:first-child {
          grid-column: span 1;
        }
      }
    </style>

    <script>
      // Mobile menu toggle
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const mobileMenu = document.getElementById('mobileMenu');

      mobileMenuBtn?.addEventListener('click', () => {
        mobileMenu?.classList.toggle('active');
      });

      // Close mobile menu when clicking a link
      const mobileLinks = document.querySelectorAll('.mobile-link');
      mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
          mobileMenu?.classList.remove('active');
        });
      });
    </script>
  </body>
</html>
